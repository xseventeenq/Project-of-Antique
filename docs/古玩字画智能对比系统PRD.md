# 古玩字画智能对比系统 PRD

## 文档信息
- **项目名称**：古玩字画智能对比系统
- **文档版本**：v1.0
- **创建日期**：2026-02-03
- **文档类型**：产品需求文档（PRD）

---

## 1. 项目概述

### 1.1 项目背景
博物馆经常将字画类型的古玩借出展示，为了避免归还的古玩被调包成仿品，需要在借出和收回时分别为古玩拍摄照片，并通过智能对比系统判断收回的古玩是否为借出时的真品。

### 1.2 项目目标
- 实现字画类古玩借出/归还的数字化管理
- 通过AI图像对比技术自动识别真伪
- 提供专业的差异分析报告，辅助人工鉴定
- 建立完整的文物借出归还档案

### 1.3 项目范围
- 管理约100件字画类文物
- 每件文物预计借出1次
- 永久保留所有历史记录

---

## 2. 目标用户

### 2.1 用户角色

| 角色 | 权限描述 |
|------|----------|
| **管理员** | - 所有权限<br>- 用户管理<br>- 查看所有记录<br>- 删除数据<br>- 导出报告 |
| **鉴定师** | - 上传照片（借出存档/收回对比）<br>- 查看对比报告<br>- 修改最终结论<br>- 导出报告 |
| **普通工作人员** | - 上传照片（借出存档/收回对比）<br>- 查看对比结果 |

### 2.2 用户场景
- **专业鉴定师**：具备丰富古玩鉴定经验，需要详细的技术分析报告
- **普通工作人员**：负责借出归还操作，需要直观易懂的结论

---

## 3. 核心功能

### 3.1 功能清单

#### 3.1.1 用户认证
- 登录认证（所有用户必须登录才能使用系统）
- 权限控制（不同角色看到不同功能）

#### 3.1.2 借出存档
- 上传借出照片（2K分辨率）
- 填写文物信息：文物名称、文物ID、作者、类别、尺寸、年代
- 预览确认照片
- 生成借出记录
- 标记为"已借出未归还"状态

#### 3.1.3 收回对比
- 输入文物ID匹配借出记录
- 上传收回照片
- 系统自动对比（1分钟内完成）
- 显示进度提示（正在分析印章、笔触等）
- 生成对比报告

#### 3.1.4 AI智能对比
**检测维度**（6个关键维度）：
1. **印章特征**：位置、内容、形状、清晰度、朱红色泽
2. **笔触/笔画特征**：线条粗细、走势、力度、墨色浓淡
3. **纸张/绢本材质**：纹理、老化痕迹、裂纹、污渍
4. **题跋/落款**：文字内容、位置、笔迹特征
5. **整体构图**：各元素位置关系、比例关系
6. **水印/防伪标记**：隐蔽标记识别

**对比结果输出**：
- 三档结论：确认为真品 / 存疑 / 确认为仿品
- 置信度分数：0-100
- 分维度独立展示（不强制合并）
- 每个维度包含：
  - 差异描述（文字说明）
  - 可视化标注（图片上标注差异区域）

#### 3.1.5 人工复核
- 鉴定师可修改最终结论
- 无需添加备注意见

#### 3.1.6 文物管理

**借出记录列表**：
- 显示所有已借出未归还的文物
- 支持按文物ID搜索

**归还记录列表**：
- 显示已归还的文物及对比结果
- 支持按文物ID搜索

**文物详情页**：
- 查看单件文物完整信息
- 借出/收回照片
- 对比报告（分维度展开显示）
- 历史借出记录

#### 3.1.7 导出功能
- 导出单件文物的对比报告（PDF格式）
- 包含照片、差异标注、结论
- 仅管理员和鉴定师可导出

#### 3.1.8 系统管理（管理员）
- 删除记录功能
- 自动定时数据备份

---

## 4. 功能详细说明

### 4.1 借出存档流程

```
1. 工作人员点击"借出存档"按钮
2. 上传借出照片（支持拖拽或点击上传）
3. 预览照片，确认无误
4. 填写文物信息：
   - 文物ID（必填，唯一标识）
   - 文物名称（必填）
   - 作者（必填）
   - 类别（必填）
   - 尺寸（必填）
   - 年代（必填）
5. 点击"确认存档"
6. 系统保存记录，标记为"已借出未归还"
```

### 4.2 收回对比流程

```
1. 工作人员点击"收回对比"按钮
2. 输入文物ID
3. 系统显示对应的借出记录信息
4. 上传收回照片
5. 系统开始对比，显示进度：
   - "正在分析印章特征..."
   - "正在对比笔触特征..."
   - "正在检测纸张纹理..."
   - "正在分析题跋落款..."
   - "正在对比整体构图..."
   - "正在识别水印标记..."
6. 约1分钟后，显示对比报告
```

### 4.3 对比报告展示

**报告结构**：
```
┌─────────────────────────────────┐
│ 文物：xxxx    文物ID：M-2024-001│
│ 作者：xxxx     年代：宋代         │
├─────────────────────────────────┤
│ 【最终结论】                    │
│ 状态：✓ 确认为真品              │
│ 置信度：87                      │
├─────────────────────────────────┤
│ 【分维度详情】                  │
│ ▼ 印章特征  ✓正常   相似度:92   │
│   差异描述：无明显差异           │
│   [可视化标注图]                 │
│                                  │
│ ▼ 笔触特征  ⚠存疑   相似度:78   │
│   差异描述：墨色浓淡略有差异     │
│   [可视化标注图]                 │
│                                  │
│ ▼ 纸张材质  ✓正常   相似度:85   │
│   ...（其他维度）               │
└─────────────────────────────────┘
```

- 所有维度默认展开，可折叠
- 状态图标：✓正常 / ⚠存疑 / ✗异常

### 4.4 界面布局

**首页（简洁型）**：
```
┌─────────────────────────────────┐
│    古玩字画智能对比系统          │
├─────────────────────────────────┤
│                                  │
│   [借出存档]                     │
│                                  │
│   [收回对比]                     │
│                                  │
│   [借出记录]                     │
│                                  │
│   [归还记录]                     │
│                                  │
│   [系统管理] (仅管理员)          │
│                                  │
└─────────────────────────────────┘
```

---

## 5. 非功能需求

### 5.1 性能要求
- 对比分析时间：≤ 1分钟
- 照片上传响应时间：≤ 3秒
- 页面加载时间：≤ 2秒

### 5.2 可用性要求
- 界面简洁直观，普通工作人员无需培训即可使用
- 报告专业详细，满足鉴定师需求
- 支持主流浏览器（Chrome、Edge、Firefox）

### 5.3 安全性要求
- 所有用户必须登录认证
- 基于角色的权限控制
- 操作日志记录（可选）
- 自动定时数据备份

### 5.4 可扩展性要求
- 预留AI模型替换接口（便于后续更换模型）
- 预留新增检测维度的扩展能力

### 5.5 部署要求
- 本地部署（博物馆内网，不联网）
- 数据不出域

---

## 6. 技术架构建议

### 6.1 整体架构
```
┌─────────────────────────────────────┐
│           前端 (Web)                 │
│    HTML + CSS + JavaScript          │
└─────────────────────────────────────┘
                 ↓
┌─────────────────────────────────────┐
│          后端服务                    │
│      (Python/Node.js/Go等)          │
└─────────────────────────────────────┘
                 ↓
┌─────────────────────────────────────┐
│          AI对比服务                  │
│      (原型阶段：验证可行性)          │
└─────────────────────────────────────┘
                 ↓
┌─────────────────────────────────────┐
│          数据存储                    │
│      (关系型数据库 + 文件存储)       │
└─────────────────────────────────────┘
```

### 6.2 技术选型建议

#### 前端
- 框架：Vue.js / React / 原生JavaScript
- UI组件库：Element Plus / Ant Design
- 图片标注：Fabric.js / Konva.js

#### 后端
- 语言：Python（推荐，便于集成AI模型）/ Node.js
- 框架：FastAPI / Flask / Express
- 认证：JWT

#### AI模型（原型阶段）
- 方案1：使用通用视觉API（OpenAI Vision、百度图像对比等）快速验证
- 方案2：使用开源模型（CLIP、ResNet）搭建原型
- 方案3：多模型组合（印章检测、纹理分析、整体对比）

#### 数据库
- 关系型数据库：PostgreSQL / MySQL
- 文件存储：本地文件系统

#### 部署
- 方式：本地部署（Docker容器化）
- 操作系统：Linux / Windows Server

### 6.3 数据存储规划
- 100件文物 × 1次借出 × 2张照片（借出+收回）= 200张原始照片
- 每张照片（2K分辨率）约 2-5MB
- 总存储空间：约 1-2GB（含标注图和数据库）

---

## 7. 数据模型设计

### 7.1 核心数据实体

#### 文物信息表 (artifacts)
```
- id: 主键
- artifact_id: 文物ID（唯一，如 "M-2024-001"）
- name: 文物名称
- author: 作者
- category: 类别
- size: 尺寸
- era: 年代
- created_at: 创建时间
- updated_at: 更新时间
```

#### 借出记录表 (borrow_records)
```
- id: 主键
- artifact_id: 关联文物ID
- borrow_photo_url: 借出照片路径
- borrow_date: 借出日期
- expected_return_date: 预计归还日期
- status: 状态（已借出/已归还）
- operator_id: 操作员ID
- created_at: 创建时间
```

#### 归还记录表 (return_records)
```
- id: 主键
- borrow_record_id: 关联借出记录ID
- return_photo_url: 归还照片路径
- return_date: 归还日期
- comparison_result: 对比结果（JSON）
  - conclusion: 结论（确认为真品/存疑/确认为仿品）
  - confidence: 置信度分数
  - dimensions: 分维度详情
    - seal: {status, score, description, annotation_url}
    - brushwork: {status, score, description, annotation_url}
    - ...
- final_conclusion: 最终结论（可被鉴定师修改）
- operator_id: 操作员ID
- created_at: 创建时间
```

#### 用户表 (users)
```
- id: 主键
- username: 用户名
- password_hash: 密码哈希
- role: 角色（管理员/鉴定师/普通工作人员）
- created_at: 创建时间
```

---

## 8. 用户流程图

### 8.1 借出流程
```
[工作人员登录] → 点击"借出存档" → 上传照片 → 预览确认
→ 填写文物信息 → 确认存档 → 系统保存记录 → 完成
```

### 8.2 归还流程
```
[工作人员登录] → 点击"收回对比" → 输入文物ID
→ 上传收回照片 → 系统对比（1分钟，显示进度）
→ 查看对比报告 → 如需修改结论（鉴定师）→ 完成
```

### 8.3 鉴定师复核流程
```
[鉴定师登录] → 查看归还记录 → 点击"存疑"的记录
→ 查看详细报告 → 综合判断 → 修改最终结论 → 保存
```

---

## 9. 界面原型描述

### 9.1 首页
- 系统标题：古玩字画智能对比系统
- 核心功能按钮（大图标，清晰易懂）：
  - 📷 借出存档
  - 🔍 收回对比
  - 📋 借出记录
  - ✅ 归还记录
  - ⚙️ 系统管理（仅管理员可见）

### 9.2 借出存档页面
```
┌──────────────────────────────────────┐
│ 借出存档                              │
├──────────────────────────────────────┤
│                                       │
│ 上传照片：                             │
│ ┌─────────────────────────────────┐  │
│ │                                 │  │
│ │        拖拽或点击上传            │  │
│ │                                 │  │
│ └─────────────────────────────────┘  │
│                                       │
│ 文物信息：                             │
│ 文物ID: [_______________]             │
│ 文件名称: [_______________]            │
│ 作者: [_______________]                │
│ 类别: [_______________]                │
│ 尺寸: [_______________]                │
│ 年代: [_______________]                │
│                                       │
│ [预览照片]  [确认存档]  [取消]        │
│                                       │
└──────────────────────────────────────┘
```

### 9.3 对比报告页面
```
┌──────────────────────────────────────┐
│ 对比报告                              │
├──────────────────────────────────────┤
│ 文物：溪山行旅图  ID：M-2024-001      │
│ 作者：范宽     年代：北宋              │
├──────────────────────────────────────┤
│                                       │
│ 【最终结论】                          │
│ ┌─────────────────────────────────┐  │
│ │ ✓ 确认为真品                     │  │
│ │ 置信度：87 / 100                 │  │
│ │                                 │  │
│ │ [修改结论] (仅鉴定师可操作)      │  │
│ └─────────────────────────────────┘  │
│                                       │
│ 【分维度详情】                        │
│ ▼ 印章特征    ✓ 正常    相似度: 92    │
│ ┌─────────────────────────────────┐  │
│ │ 差异描述：无明显差异              │  │
│ │ ┌─────┐  ┌─────┐               │  │
│ │ │借出 │  │收回 │               │  │
│ │ └─────┘  └─────┘               │  │
│ └─────────────────────────────────┘  │
│                                       │
│ ▼ 笔触特征    ⚠ 存疑    相似度: 78    │
│ ┌─────────────────────────────────┐  │
│ │ 差异描述：墨色浓淡略有差异        │  │
│ │ [标注对比图]                     │  │
│ └─────────────────────────────────┘  │
│                                       │
│ ▼ 纸张材质    ✓ 正常    相似度: 85    │
│ ▼ 题跋落款    ✓ 正常    相似度: 90    │
│ ▼ 整体构图    ✓ 正常    相似度: 88    │
│ ▼ 水印标记    ✓ 正常    相似度: 95    │
│                                       │
│ [导出PDF]  [返回]                    │
└──────────────────────────────────────┘
```

---

## 10. 后续迭代方向

### 10.1 第一阶段（MVP）
- 实现基础借出/归还流程
- 完成AI对比原型验证
- 实现基本的对比报告

### 10.2 第二阶段（优化）
- 优化AI模型准确性
- 增加更多检测维度
- 支持多角度照片对比

### 10.3 第三阶段（扩展）
- 支持其他类型文物（瓷器、青铜器等）
- 增加统计分析和数据可视化
- 移动端支持

---

## 11. 风险与限制

### 11.1 技术风险
- **AI模型准确性**：字画识别是复杂任务，原型阶段可能无法达到高准确率
- **拍摄条件影响**：即使标准化拍摄，光照、角度等因素仍可能影响对比结果
- **算力需求**：图像对比可能需要较高算力，本地部署需要考虑硬件配置

### 11.2 业务风险
- **误判风险**：系统误判可能导致文物损失
- **依赖人工复核**：系统结论仅供参考，不能完全替代人工鉴定

### 11.3 限制
- 仅支持字画类型文物
- 需要标准化拍摄环境
- 不支持实时对比（需1分钟处理时间）

---

## 12. 成功指标

### 12.1 功能验收标准
- ✓ 借出存档流程完整可用
- ✓ 收回对比在1分钟内完成
- ✓ 对比报告包含所有6个维度的分析和可视化标注
- ✓ 三种角色权限控制正确
- ✓ 导出PDF功能正常

### 12.2 性能指标
- 对比准确率（原型阶段无具体要求，以验证可行性为主）
- 系统可用性 > 99%
- 并发支持：至少5人同时使用

---

## 附录

### A. 术语表
- **文物ID**：文物的唯一标识符，如 "M-2024-001"
- **借出存档**：文物借出时拍摄照片并保存信息的过程
- **收回对比**：文物归还时拍摄照片并与借出照片进行AI对比
- **置信度**：系统对判断结果的确定程度，0-100分
- **可视化标注**：在图片上用框、箭头等图形标注差异区域

### B. 参考资料
- 文物数字化管理规范
- 字画鉴定技术指南
- AI图像对比技术文档

---

**文档结束**